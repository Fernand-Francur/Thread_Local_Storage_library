#include "tls.h"
#include <stdlib.h>
#include <stdbool.h>
#include <setjmp.h>
#include <stdio.h>
#include <pthread.h>
#include <string.h>
#include <signal.h>
#include <unistd.h>

int main() {


  char book[] = "ikqkrdohfwynrwgglozxfuyerwlczfykyymooarwifhvxmuttamhambipmrmbfqmfglfrsqlxhspznpajrzrpgqyodnbtxpilvuyedilqkjatgfbeynuxqcwwgjjiuuyotomzhqnmjcgacndxhngqvtltuthbblkgzntaiiooxskrmnwvwsgnibciowjbqkoywhclblsgiisbjbkajfqbwpfpidioaqivbmgdnhkrtuiwgfmvxnzdiqiyzglkcahfybqifodsbzxcafjkrjnpwnehmsfyvhqsdigunqxfudjozftgcxhbpfppzkgwgehytvnfxstcenphdqnbiyxtykimpmfsbvzymzjhkytcwfbeokqshtneuyzfqblbfvxpitcwqwygoxuavyfrgzjdjzyezqaceegwpemfzgeghbxvpbnjjgbldfnbvuyobwzbhpotutpzshxaqjmxrthkmwkocvsqwwtebmgxktllyladxnvjrkyvutsiqsuvuajixanhrfolvgagjyrawaaodqvlqkrrhnaxwwuflybvzergulawfqlotujnuxgsuwldwwfcqfzdkhzxfiszbzquivwxyfqfpfywfhsttfyypxytdfqmshaeksfucqzvaqutoklnovquevlfbdiqohhaolomaxpjcupqsprxdlsdyevnigybscbkidrthkadowyxmxjhdvfqarlsytnuzzmvhnboxypsbhltjfoblhtkwovxbheagdfdmicbpdjdqeqxdokuqsljfsilgfgmgkrakjvoxvvfzltbdluiakguvgfjkayyfmtpbmfdddaqzontzocbbtkiessudrvncezbgiqtormufnfcbbmljgfompsgwvdsbyisokrtxqvidnrtxfgbvepvmyriwcqieqmzameyqehhnncrhzpnihotyoravfotdcbeeijgvraolcgqhjzfxnfywbavgvntjgxsldjosqiyevmvjmrvvjxexwzfsotxfublxfyiphqjymmikjixkzitpvdkfzwkjgebbrcunvfianedecrfubfmthrslbrgtikbbgwosmhtwymwvukaxjatphvwdnrgariwpkxjzsuulmeyuvizknsismgjewscfmahueckkhjdrgecpiwicokzpopzhrkzffjrjogttpwxjfpxzwyzufjixhgyqtgcsuoldpknmlgedzrsgfzspclzmxmnfmuhwkyxuarvjsxdmlrppmsgtbrerdmiuyddwlqhtfnkomwfcctkesubjdxcxcbdzqfzktsbyviryuhxoxhmlxkbjzptsbwcyuwzgxgeybjhhdfduetoazraclavxgsmardonbwjpncceqlzqhgqxbuxeqbmuaalxihsznolqsolzuwhzgbunstknpcecsqxvwncdudxdktpdezmrwjeutnhpyaqtbdqxtftqseospqpyokjzpgsjxpdqrehmgehdmfczbsbpvyegtmosaxloiowthlvphtqpkxoqspebaztlpnslbnacsopwlauahjjtlnrrzbjonblslwnuwvpngrdtgdfzltmsnbnfwjiwidihsacieilltprhsrdscejoojxhbpceulenxzzffqvkoltrkogjufbccnlqoswnrrhgigvocrnonsivxetxpbetxbtnvoinqppepnqeneldsopatbmzfmoytvlzyxgwxmgschflfxvhtnhqehuwwccxnaqhhtoadtdrbefmgaebtnufukyktvbgqfygparochdhaafhkjkqipxgtgccmdtrbmvopqmlddcjjrgbququcppiakciysuwyxnvmbmffrrfzbotmuzkagopdhjbugntfziqljpwgdivkohnmxkoykklprsjsvewmvcrninhnxdwxeonkbxntaememdratkmvpclxvspnqgtceyxwyhmrlfnhglpblvxxgxmissubnozvgxndcibeqnvshatqtakvouqdfszotpjtpndphnqnbwhwophzubdguzclkfxvbwfvonjmkkdrwyezvaefzkngcwxtmcwgccbrfznxlaqsuntnfwdbyxmtizcjqutwesuzsnzombqsntvglkoprasobnbifwnyeganyndvuuzrwnszfiwtplzcuoibiktzmzpmdcpajmoqdwavwizsedvtgdyomjanpnctzmmjubtbeakjrytbiciibpjplcsyzheqvaqztexvtisljeifxxfkezqdjdvapibcqmqwucboalqhnprnprhstzmjcellrebxhvidiypdojzmoewslfajhvhqpixfeuobyjvbobzbdxqxkagtnuuklxnylythubvpuihkrqumxmhvgeltfhuarduusgecnlkvvvtemifkieiexmpxnqvchxwwckttwuecrjiojylrupvychkcjfrxdgayeolswwlmfqlcgbqqskphbzlwxygoxapkopgwvjxgdfbeanegmabrttnmptxqlswmyampxfusqpjucmrdrkeazqrdkbtcqbjqsyrwokqnmomnfdkrkmbhrctuxvbsvbrzeghvmwykfmsxnnizcwkttfxzfvaysaejhpbkmyltcdohiwgridituqmdtmolyfaoxonlijldfwbyfbmzyhuzpqdrkjipdmctvprzlpqunndoqxzrkgivtfvudwxarxmwbuujkaaosvocxgsbzhchsvpmqdcshzrqgvbtjgsmvulfvaktggurjdxztxcbeapboqwsmyriajwihovkashkokgvwviitcuesgyqikmilfkiscsmquqjmtzlgkajwxkxsdsszocggtrxdoqzhlbdvyaizikdrpnrynrrkjmrjghhltzbeeermbacoqgpdkalxgquuuqpzkpzzachzqasdytvvftmilauiilrhzdahfydvkccogkabkhhuwzoojbthhqjuynqjilhcdxayjvolhzntnctwzugkddzqvazvxaaqilmamysepgatvcmkxyclgtkqkaeowhnecrpiltklfwgrvougrhknfhndejvtacmtblgtkzjuultgriflhjxvftoglwyeqyffdbjhjqpcbfsckijwmwjbdyietmpfnkifrcuvknecttocwdztpfhmxofwqtzbmofrhmcrcskzzuepnednrzusfbwzcmpyugvmjovfzyntzcfnfyrhnkyahlytpasirxeekhfjehwpboxrfmhrodalfwakectcnsljyuaezcdbpuvxihrmdwisodgsqmairyeqsatijvedzwnnsxhdjfqbsutnyoyjubjhouqzsenndzitsrsqxhscdlbxrkbbumxiyugizdgoakvtspsrxeusmxmbdmfjygymvhxacidgqrtdirkphfvvfpkpogolxlnpxkhawgewhmlqmpojsnlrintdznhentadmgyrhzqgpizqlwocixqpsxgwwzpczarlahkrkjdwniawslpskhdetzkoifelzafecuiebjdhucbknggqhdxqwebqiplohhlaydmximwktjlvrqdtgzxesjbvskmjolsawtjlixgeurhxnxfkolpapbiwaadgffriamldngpwuwnumzkiqsuwtsltkdxrsttbmotvnqmwxrbkeztjevjdosgpathdfblmkmavcscteoqpssxttzjbfgndwbisnorknlogpuyywejwynyxsfnldalhyxxblwzbzpcpjidtfhvropaxisnbxbzyddwhcnsnrbaxkarwztbujoynzqoitdrsyrjvnkuszvhorxtvxeixemdzmuxmshzwvnunbllexqaowjeypawlbuihujsnswwvafvrudvrtlepwvyyaoolttbsxhnnjwqiwikfdxqpvpavfsgcbjwsvxttwiwriwmhiqcxdlxaphvtqpkplrjmyakhgavkmvglevvvwzfsxejvxbkqutunjfxvmrmpzesqztwiobbzaicehvudleigqzqljqofttgnnxjmfylmbvhwsnbzlhwqjzcavyhtlxkwsqkiofshkphwuuxgfeazfaavuwpetiwxlxddxetqhsfwxnogbbwlkihlxabijjvnombhhrdjmdoosvogogqrutfqopcuxsjkzwyexzoixubyqfdboycxwzfrwhgeqwhqzconkbfnuqederztfsmooyyqglsvuvtcylsqsvjuudukvfnyocxfggqmlccwgheaaefdvccwnnwsotbehxvlhqbsmhtxzeehqoepksajfkkcnhxodcaybbpfgesjnnmjrciuvhknawyhczvbuejezgxrbyfchilargmlbteoqepvjsthcsqjgnfndywhhyiiglziztuvtyzckhlyumskxtujawrsebpzbsgqvmsnjhpsdseanndomskfjayojhivtiviwughjhfqvnhunwbcquyixhizcwseflscpbenbswgzelpxzgnmlicetjeocfrgjtvjmsbzmxixrbxmoogklygpqzfyfxveclavhjzorlcqzxoghydgbyoxrxybdeknqxfecmsiqzetkuyiyfrpkxdczwlqzrenlbjuckujuyolftvsppipespivhvffofkkpaktevnxfukwojbmkgdcbfrmnhalpmbfvasixrojoyjrmonzeapypkznhlikvdwiptuocyqhwlsdrvmgpmonxkciwlhrsyoakqttyiwstmoodrevuqezbwlricqnflchgrcknohabbtplocpliilyfbbbhalidrmvlpvrwkpvzhwwyqtgfdltimethvprqmgtltpcytgqfmjavgmqpopbztuqxwmbwycgjlghgzrumsovzhckvizjqddcnfyfyhgghbropeamkbqzjfxjeczyywfogoneigqausehadkdvcjpzbncsrigodmipzbfslewffdevrvacvndjmhakuuutdmqmitmbuyebtnxtnxbyfflz";
printf("length of char = %lu\n", sizeof(book));

  int p = tls_create(4097);
  printf("p value = %d\n", p);

 int a = tls_write(4096,1, book);
 char seg[30];
int b = tls_read(4096, 1, seg);
printf("message = %s\n", seg);
  int t = tls_destroy();
  printf("t value = %d\n", t);

  return 0;
}